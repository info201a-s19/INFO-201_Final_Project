---
title: "U.S. Flights"
author: "Shareen C, Erya M, Sarah P, Jerome O"
date: "May 20, 2019"
output: html_document
---

```{r, warning=FALSE, message=FALSE, echo=FALSE,include=FALSE}
knitr::opts_chunk$set(echo = F)
# Loading libraries
library("dplyr")
library("knitr")
library("ggplot2")
library("plotly")
library("kableExtra")
library("maps")
library("leaflet")

# Sourced File
source("scripts/airports_table.R")
source("scripts/us_map.R")
source("scripts/stacked_bar_chart.R")
source("scripts/scatter_plot.R")
```
## Introduction

This report is about flights in the United States. We wanted to limit our scope in the United States rather than internationally to get a better sense of the flights around us. Knowing information about flights in the United States can benefit us if we travel. For example, we can find what airlines are usually delayed, so we could possibly avoid them in the future. The datasets we used are from (**OurAirports**)[http://ourairports.com/data/].

## Table

This table includes the top 10 regions that have the most airports. It also includes the most common type of airports and average elevation of the airport of each region. Airport elevation means the highest point of an airport's usable landing area measured in feet above mean sea level. The table showes that Texas has the most number of airports. California has the highest average airport elevation. Since Florida airports have lower average elevation, we may assume that Florida airports are vulnerable to sea level rise. Therefore, many passengers may be suffering from climate change

```{r busiest_airport, echo = F}
  kable(busiest_airport, align = "c",
        col.names = c("Region", "Number of airports", "Most common type of airports", "Average elevation in ft"))
```

```{r only_us_airports, echo = FALSE}
us_map <- leaflet(data = airports) %>% addTiles()
us_map %>% addCircleMarkers(
  lat = ~latitude_deg,
  lng = ~longitude_deg,
  popup = ~paste("Name:", name, "<br>",
                "Type:", type, "<br>",
                "Elevation:", elevation_ft),
  radius = 0.01,
  weight = 0
)
```

```{r stacked_bar_chart, echo = FALSE}
num_flights_chart <- ggplot(data = compare_airlines, aes(x = MONTH, y = count, fill = AIRLINE, text = paste("# of Flights: ", count))) +
  ggtitle("Number of Flights across Months in 2015") +
  xlab("Months") + ylab("Number of Flights") +
  scale_x_discrete(limits=c("Jan","Feb","Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")) +
  scale_fill_discrete(name = "Airlines", labels = c("American Airlines (AA)", "Delta Airlines(DL)")) +
  scale_fill_manual(values = alpha(c("blue", "red"), 1)) +
  geom_bar(stat = "identity")
ggplotly(num_flights_chart, tooltip = "text")
```

## Scatter Plot

The following scatter plot was composed from data on Kaggle, called (**2015 Flight Delays and Cancellations**)[https://www.kaggle.com/usdot/flight-delays]. The scatter plot compares the arrival delays and departure delays of United Airlines and American Airlines' flights.

```{r scatter_plot, echo = FALSE}
#scatter_plot_of_delays
```

